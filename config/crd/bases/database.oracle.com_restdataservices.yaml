---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
  name: restdataservices.database.oracle.com
spec:
  group: database.oracle.com
  names:
    kind: RestDataServices
    listKind: RestDataServicesList
    plural: restdataservices
    singular: restdataservices
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: RestDataServices is the Schema for the restdataservices API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: RestDataServicesSpec defines the desired state of RestDataServices
            properties:
              autoRestart:
                description: Specifies whether to restart pods when Global or Pool
                  configurations change
                type: boolean
              globalSettings:
                description: Contains settings that are configured across the entire
                  ORDS instance.
                properties:
                  cacheMetadataEnabled:
                    description: Specifies the setting to enable or disable metadata
                      caching.
                    type: boolean
                  cacheMetadataGraphqlExpireAfterAccess:
                    description: Specifies the duration after a GraphQL schema is
                      not accessed from the cache that it expires.
                    format: int64
                    type: integer
                  cacheMetadataJwksEnabled:
                    description: Specifies the setting to enable or disable JWKS caching.
                    type: boolean
                  cacheMetadataJwksExpireAfterAccess:
                    description: Specifies the duration after a JWK is not accessed
                      from the cache that it expires. By default this is disabled.
                    format: int64
                    type: integer
                  cacheMetadataJwksExpireAfterWrite:
                    description: Specifies the duration after a JWK is cached, that
                      is, it expires and has to be loaded again.
                    format: int64
                    type: integer
                  cacheMetadataJwksInitialCapacity:
                    description: Specifies the initial capacity of the JWKS cache.
                    format: int32
                    type: integer
                  cacheMetadataJwksMaximumSize:
                    description: Specifies the maximum capacity of the JWKS cache.
                    format: int32
                    type: integer
                  cacheMetadataTimeout:
                    description: Specifies the setting to determine for how long a
                      metadata record remains in the cache. Longer duration means,
                      it takes longer to view the applied changes. The formats accepted
                      are based on the ISO-8601 duration format.
                    type: string
                  databaseApiEnabled:
                    description: Specifies whether the Database API is enabled.
                    type: boolean
                  databaseApiManagementServicesDisabled:
                    description: Specifies to disable the Database API administration
                      related services. Only applicable when Database API is enabled.
                    type: boolean
                  dbInvalidPoolTimeout:
                    description: 'Specifies how long to wait before retrying an invalid
                      pool. Default: 15m'
                    format: int64
                    type: integer
                  debugPrintDebugToScreen:
                    description: Specifies whether to display error messages on the
                      browser.
                    type: boolean
                  errorResponseFormat:
                    default: auto
                    description: Specifies how the HTTP error responses must be formatted.
                      html - Force all responses to be in HTML format json - Force
                      all responses to be in JSON format auto - Automatically determines
                      most appropriate format for the request (default).
                    type: string
                  featureGrahpqlMaxNestingDepth:
                    default: 5
                    description: Specifies the maximum join nesting depth limit for
                      GraphQL queries.
                    format: int32
                    type: integer
                  icapPort:
                    description: Specifies the Internet Content Adaptation Protocol
                      (ICAP) port to virus scan files. Either icap.port or icap.secure.port
                      are required to have a value.
                    format: int32
                    type: integer
                  icapSecurePort:
                    description: Specifies the Internet Content Adaptation Protocol
                      (ICAP) port to virus scan files. Either icap.port or icap.secure.port
                      are required to have a value. If values for both icap.port and
                      icap.secure.port are provided, then the value of icap.port is
                      ignored.
                    format: int32
                    type: integer
                  icapServer:
                    description: Specifies the Internet Content Adaptation Protocol
                      (ICAP) server name or IP address to virus scan files. The icap.server
                      is required to have a value.
                    type: string
                  logProcedure:
                    description: Specifies whether procedures are to be logged.
                    type: boolean
                  requestTraceHeaderName:
                    description: Specifies the name of the HTTP request header that
                      uniquely identifies the request end to end as it passes through
                      the various layers of the application stack. In Oracle this
                      header is commonly referred to as the ECID (Entity Context ID).
                    type: string
                  securityCredentialsAttempts:
                    default: -1
                    description: Specifies the maximum number of unsuccessful password
                      attempts allowed. Enabled by setting a positive integer value.
                    format: int32
                    type: integer
                  securityCredentialsLockTime:
                    description: Specifies the period to lock the account that has
                      exceeded maximum attempts. Defaults to 10m (10 minutes)
                    format: int64
                    type: integer
                  securityDisableDefaultExclusionList:
                    description: If this value is set to true, then the Oracle REST
                      Data Services internal exclusion list is not enforced. Oracle
                      recommends that you do not set this value to true.
                    type: boolean
                  securityExclusionList:
                    description: Specifies a pattern for procedures, packages, or
                      schema names which are forbidden to be directly executed from
                      a browser.
                    type: string
                  securityInclusionList:
                    description: Specifies a pattern for procedures, packages, or
                      schema names which are allowed to be directly executed from
                      a browser.
                    type: string
                  securityMaxEntries:
                    default: 2000
                    description: Specifies the maximum number of cached procedure
                      validations. Set this value to 0 to force the validation procedure
                      to be invoked on each request.
                    format: int32
                    type: integer
                  securityVerifySSL:
                    description: Specifies whether HTTPS is available in your environment.
                    type: boolean
                  standaloneBinds:
                    default: 0.0.0.0
                    description: Specifies the comma separated list of host names
                      or IP addresses to identify a specific network interface on
                      which to listen.
                    type: string
                  standaloneHttpPort:
                    description: Specifies the HTTP listen port. / +kubebuilder:default:=8080
                    format: int32
                    type: integer
                  standaloneHttpsHost:
                    description: Specifies the SSL certificate hostname.
                    type: string
                  standaloneHttpsPort:
                    default: 8443
                    description: Specifies the HTTPS listen port.
                    format: int32
                    type: integer
                  standaloneStopTimeout:
                    description: 'Specifies the period for Standalone Mode to wait
                      until it is gracefully shutdown. Default: 10s (10 seconds)'
                    format: int32
                    type: integer
                type: object
              image:
                type: string
              imagePullPolicy:
                description: PullPolicy describes a policy for if/when to pull a container
                  image
                type: string
              imagePullSecrets:
                type: string
              poolSettings:
                description: Contains settings for individual pools/databases
                items:
                  properties:
                    ApexSecurityUserRoles:
                      description: Specifies the comma delimited list of additional
                        roles to assign authenticated regular APEX users.
                      type: string
                    AutoupgradeApiAulocation:
                      description: specifies a configuration setting for AutoUpgrade.jar
                        location.
                      type: string
                    AutoupgradeApiJvmlocation:
                      description: Specifies a configuration setting for AutoUpgrade
                        REST API JVM location.
                      type: string
                    AutoupgradeApiLoglocation:
                      description: Specifies a configuration setting for AutoUpgrade
                        REST API log location.
                      type: string
                    DbCredentialsSource:
                      default: pool
                      description: Specifies the source for database credentials when
                        creating a direct connection for running SQL statements. Value
                        can be one of pool or request. If the value is pool, then
                        the credentials defined in this pool is used to create a JDBC
                        connection. If the value request is used, then the credentials
                        in the request is used to create a JDBC connection and if
                        successful, grants the requestor SQL Developer role.
                      type: string
                    DbPort:
                      description: Specifies the database listener port.
                      format: int32
                      type: integer
                    DbWalletZipPath:
                      description: Specifies the path to a wallet archive containing
                        connection details for the pool.
                      type: string
                    JdbcAuthAdminRole:
                      description: Identifies the database role that indicates that
                        the database user must get the SQL Administrator role.
                      type: string
                    JdbcMinLimit:
                      default: 2
                      description: Specifies the minimum number of connections.
                      format: int32
                      type: integer
                    PlsqlGatewayMode:
                      description: Indicates if the PL/SQL Gateway functionality should
                        be available for a pool or not. Value can be one of disabled,
                        direct, or proxied. If the value is direct, then the pool
                        serves the PL/SQL Gateway requests directly. If the value
                        is PLSQL_GATEWAY_CONFIG, view is used to determine the user
                        to whom to proxy.
                      type: string
                    SodaMaxLimit:
                      default: 1000
                      description: When using the SODA REST API, specifies the maximum
                        number of documents that will be returned for a GET request
                        on a collection URL, regardless of any limit specified in
                        the URL. Must be a positive integer, or "unlimited" for no
                        limit.
                      type: string
                    apexSecurityAdministratorRoles:
                      description: Specifies the comma delimited list of additional
                        roles to assign authenticated APEX administrator type users.
                      type: string
                    autoupgradeApiEnabled:
                      description: Specifies a configuration setting to enable AutoUpgrade
                        REST API features.
                      type: boolean
                    dbAdminAuthSecret:
                      description: Specifies the Secret with the dbAdminUser (SYS
                        AS SYSDBA) and dbAdminPassword values for the database account
                        that ORDS uses for administration operations in the database.
                      properties:
                        passwordKey:
                          default: password
                          type: string
                        secretName:
                          type: string
                        usernameKey:
                          default: username
                          type: string
                      required:
                      - secretName
                      type: object
                    dbAuthSecret:
                      description: Specifies the Secret with the dbUser (ORDS_PUBLIC_USER)
                        and dbPassword values for the connection.
                      properties:
                        passwordKey:
                          default: password
                          type: string
                        secretName:
                          type: string
                        usernameKey:
                          default: username
                          type: string
                      required:
                      - secretName
                      type: object
                    dbCdbAdminAuthSecret:
                      description: Specifies the Secret with the dbCdbAdminUser (SYS
                        AS SYSDBA) and dbCdbAdminPassword values Specifies the username
                        for the database account that ORDS uses for the Pluggable
                        Database Lifecycle Management.
                      properties:
                        passwordKey:
                          default: password
                          type: string
                        secretName:
                          type: string
                        usernameKey:
                          default: username
                          type: string
                      required:
                      - secretName
                      type: object
                    dbConnectionType:
                      description: 'The type of connection. Supported values: basic,
                        tns, customurl'
                      type: string
                    dbCustomURL:
                      description: Specifies the JDBC URL connection to connect to
                        the database.
                      type: string
                    dbHostname:
                      description: Specifies the host system for the Oracle database.
                      type: string
                    dbPoolDestroyTimeout:
                      description: 'Indicates how long to wait to gracefully destroy
                        a pool before moving to forcefully destroy all connections
                        including borrowed ones. Default: 5m'
                      format: int64
                      type: integer
                    dbServiceNameSuffix:
                      description: Specifies that the pool points to a CDB, and that
                        the PDBs connected to that CDB should be made addressable
                        by Oracle REST Data Services
                      type: string
                    dbServicename:
                      description: Specifies the network service name of the database.
                      type: string
                    dbSid:
                      description: Specifies the name of the database.
                      type: string
                    dbTnsAliasName:
                      description: Specifies the TNS alias name that matches the name
                        in the tnsnames.ora file.
                      type: string
                    dbTnsDirectory:
                      description: The directory location of your tnsnames.ora file.
                      type: string
                    dbWalletZip:
                      description: Specifies the wallet archive (provided in BASE64
                        encoding) containing connection details for the pool.
                      type: string
                    dbWalletZipService:
                      description: Specifies the service name in the wallet archive
                        for the pool.
                      type: string
                    debugTrackResources:
                      description: Specifies to enable tracking of JDBC resources.
                        If not released causes in resource leaks or exhaustion in
                        the database. Tracking imposes a performance overhead.
                      type: boolean
                    featureOpenservicebrokerExclude:
                      description: Specifies to disable the Open Service Broker services
                        available for the pool.
                      type: boolean
                    featureSdw:
                      description: Specifies to enable the Database Actions feature.
                      type: boolean
                    httpCookieFilter:
                      description: Specifies a comma separated list of HTTP Cookies
                        to exclude when initializing an Oracle Web Agent environment.
                      type: string
                    jdbCleanupMode:
                      default: RECYCLE
                      description: Specifies how a pooled JDBC connection and corresponding
                        database session, is released when a request has been processed.
                      type: string
                    jdbcAuthEnabled:
                      default: false
                      description: Specifies if the PL/SQL Gateway calls can be authenticated
                        using database users. If the value is true then this feature
                        is enabled. If the value is false, then this feature is disabled.
                        Oracle recommends not to use this feature. This feature used
                        only to facilitate customers migrating from mod_plsql.
                      type: boolean
                    jdbcDriverType:
                      description: 'Specifies the JDBC driver type. Supported values:
                        thin, oci8 / +kubebuilder:default:="thin"'
                      type: string
                    jdbcInactivityTimeout:
                      default: 1800
                      description: Specifies how long an available connection can
                        remain idle before it is closed. The inactivity connection
                        timeout is in seconds.
                      format: int32
                      type: integer
                    jdbcInitialLimit:
                      default: 10
                      description: Specifies the initial size for the number of connections
                        that will be created. The default is low, and should probably
                        be set higher in most production environments.
                      format: int32
                      type: integer
                    jdbcMaxConnectionReuseCount:
                      default: 1000
                      description: Specifies the maximum number of times to reuse
                        a connection before it is discarded and replaced with a new
                        connection.
                      format: int32
                      type: integer
                    jdbcMaxLimit:
                      default: 10
                      description: Specifies the maximum number of connections. Might
                        be too low for some production environments.
                      format: int32
                      type: integer
                    jdbcMaxStatementsLimit:
                      default: 10
                      description: Specifies the maximum number of statements to cache
                        for each connection.
                      format: int32
                      type: integer
                    jdbcStatementTimeout:
                      default: 900
                      description: Specifies a timeout period on a statement. An abnormally
                        long running query or script, executed by a request, may leave
                        it in a hanging state unless a timeout is set on the statement.
                        Setting a timeout on the statement ensures that all the queries
                        automatically timeout if they are not completed within the
                        specified time period.
                      format: int32
                      type: integer
                    miscDefaultPage:
                      description: Specifies the default page to display. The Oracle
                        REST Data Services Landing Page.
                      type: string
                    miscPaginationMaxRows:
                      default: 10000
                      description: Specifies the maximum number of rows that will
                        be returned from a query when processing a RESTful service
                        and that will be returned from a nested cursor in a result
                        set. Affects all RESTful services generated through a SQL
                        query, regardless of whether the resource is paginated.
                      format: int32
                      type: integer
                    owaTraceSql:
                      description: If it is true, then it causes a trace of the SQL
                        statements performed by Oracle Web Agent to be echoed to the
                        log.
                      type: boolean
                    poolName:
                      description: Specifies the Pool Name
                      type: string
                    procedurePostProcess:
                      description: Specifies the procedure name(s) to execute after
                        executing the procedure specified on the URL. Multiple procedure
                        names must be separated by commas.
                      type: string
                    procedurePreProcess:
                      description: Specifies the procedure name(s) to execute prior
                        to executing the procedure specified on the URL. Multiple
                        procedure names must be separated by commas.
                      type: string
                    procedureRestPreHook:
                      description: Specifies the function to be invoked prior to dispatching
                        each Oracle REST Data Services based REST Service. The function
                        can perform configuration of the database session, perform
                        additional validation or authorization of the request. If
                        the function returns true, then processing of the request
                        continues. If the function returns false, then processing
                        of the request is aborted and an HTTP 403 Forbidden status
                        is returned.
                      type: string
                    restEnabledSqlActive:
                      default: false
                      description: Specifies whether the REST-Enabled SQL service
                        is active.
                      type: boolean
                    securityJwksConnectionTimeout:
                      description: Specifies the maximum amount of time before timing-out
                        when accessing a JWK url. Default is 5 seconds.
                      format: int64
                      type: integer
                    securityJwksReadTimeout:
                      description: Specifies the maximum amount of time reading a
                        response from the JWK url before timing-out. Default is 5
                        seconds.
                      format: int64
                      type: integer
                    securityJwksRefreshInterval:
                      description: Specifies the minimum interval between refreshing
                        the JWK cached value.
                      format: int64
                      type: integer
                    securityJwksSize:
                      description: Specifies the maximum number of bytes read from
                        the JWK url. Default 100000 bytes.
                      format: int32
                      type: integer
                    securityJwtAllowedAge:
                      description: Specifies the maximum allowed age of a JWT in seconds,
                        regardless of expired claim. The age of the JWT is taken from
                        the JWT issued at claim. By default, it is disabled.
                      format: int64
                      type: integer
                    securityJwtAllowedSkew:
                      description: Specifies the maximum skew the JWT time claims
                        are accepted. This is useful if the clock on the JWT issuer
                        and ORDS differs by a few seconds. By default, it is disabled.
                      format: int64
                      type: integer
                    securityJwtProfileEnabled:
                      default: true
                      description: 'Specifies whether the JWT Profile authentication
                        is available. Supported values:'
                      type: boolean
                    securityRequestAuthenticationFunction:
                      description: Specifies an authentication function to determine
                        if the requested procedure in the URL should be allowed or
                        disallowed for processing. The function should return true
                        if the procedure is allowed; otherwise, it should return false.
                        If it returns false, Oracle REST Data Services will return
                        WWW-Authenticate in the response header.
                      type: string
                    securityRequestValidationFunction:
                      description: Specifies a validation function to determine if
                        the requested procedure in the URL should be allowed or disallowed
                        for processing. The function should return true if the procedure
                        is allowed; otherwise, return false.
                      type: string
                    securityValidationFunctionType:
                      description: 'Indicates the type of security.requestValidationFunction:
                        javascript or plsql. / +kubebuilder:default:="plsql"'
                      type: string
                    sodaDefaultLimit:
                      default: 100
                      description: When using the SODA REST API, specifies the default
                        number of documents returned for a GET request on a collection
                        when a limit is not specified in the URL. Must be a positive
                        integer, or "unlimited" for no limit.
                      type: string
                  required:
                  - dbAuthSecret
                  - poolName
                  type: object
                type: array
              replicas:
                format: int32
                minimum: 1
                type: integer
              workloadType:
                enum:
                - Deployment
                - StatefulSet
                - DaemonSet
                type: string
            required:
            - globalSettings
            - image
            type: object
          status:
            description: RestDataServicesStatus defines the observed state of RestDataServices
            properties:
              conditions:
                description: Conditions store the status conditions of the ORDS instances
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              image:
                type: string
              replicas:
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
